# =============================================================================
# Kafka Deployment Configuration
# =============================================================================
# Copy this file to .env and modify as needed for your environment
# This file supports both single-node and cluster deployments

# =============================================================================
# Image Versions
# =============================================================================
ZOOKEEPER_VERSION=7.5.0
KAFKA_VERSION=7.5.0
KAFKA_UI_VERSION=latest

# =============================================================================
# Zookeeper Configuration
# =============================================================================
# Single-node: Not used (defaults apply)
# Cluster: Number of Zookeeper replicas (recommended: 3 or 5)
ZOOKEEPER_REPLICAS=3
ZOOKEEPER_CLIENT_PORT=2181
ZOOKEEPER_TICK_TIME=2000
ZOOKEEPER_SYNC_LIMIT=2
ZOOKEEPER_INIT_LIMIT=5
ZOOKEEPER_SERVER_ID=1
ZOOKEEPER_SERVERS=zookeeper:2888:3888;2181
ZOOKEEPER_PORT=2181

# =============================================================================
# Kafka Broker Configuration
# =============================================================================
# Single-node: KAFKA_BROKER_ID defaults to 1
# Cluster: Number of Kafka broker replicas (recommended: 3+)
KAFKA_REPLICAS=3
KAFKA_BROKER_ID=
ZOOKEEPER_CONNECT=zookeeper:2181

# Listener Configuration
# Single-node: Use localhost for external access
# Cluster: Use service name for internal communication
KAFKA_ADVERTISED_LISTENERS=
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=PLAINTEXT:PLAINTEXT,PLAINTEXT_INTERNAL:PLAINTEXT
KAFKA_INTER_BROKER_LISTENER_NAME=PLAINTEXT_INTERNAL
KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092,PLAINTEXT_INTERNAL://0.0.0.0:29092

# Port Configuration
KAFKA_PORT=9092
KAFKA_INTERNAL_PORT=29092

# =============================================================================
# Topic Configuration
# =============================================================================
# Replication settings (for cluster deployments)
KAFKA_REPLICATION_FACTOR=3
KAFKA_MIN_ISR=2
KAFKA_NUM_PARTITIONS=3
KAFKA_AUTO_CREATE_TOPICS_ENABLE=false
KAFKA_DEFAULT_REPLICATION_FACTOR=3
KAFKA_MIN_INSYNC_REPLICAS=2

# Internal topic replication (should match cluster size)
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=3
KAFKA_TRANSACTION_STATE_LOG_MIN_ISR=2
KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR=3

# =============================================================================
# Log Retention and Cleanup
# =============================================================================
KAFKA_LOG_RETENTION_HOURS=168
KAFKA_LOG_SEGMENT_BYTES=1073741824
KAFKA_LOG_RETENTION_CHECK_INTERVAL_MS=300000
KAFKA_LOG_CLEANUP_POLICY=delete
KAFKA_DELETE_TOPIC_ENABLE=true

# =============================================================================
# Performance Tuning
# =============================================================================
KAFKA_COMPRESSION_TYPE=producer
KAFKA_NUM_NETWORK_THREADS=8
KAFKA_NUM_IO_THREADS=8
KAFKA_SOCKET_SEND_BUFFER_BYTES=102400
KAFKA_SOCKET_RECEIVE_BUFFER_BYTES=102400
KAFKA_SOCKET_REQUEST_MAX_BYTES=104857600

# =============================================================================
# Resource Limits (Cluster Only)
# =============================================================================
KAFKA_CPU_LIMIT=2
KAFKA_MEMORY_LIMIT=4G
KAFKA_CPU_RESERVATION=1
KAFKA_MEMORY_RESERVATION=2G

# =============================================================================
# Kafka UI Configuration
# =============================================================================
KAFKA_UI_PORT=8080
KAFKA_UI_CLUSTER_NAME=cluster
KAFKA_UI_BOOTSTRAP_SERVERS=kafka:29092
KAFKA_UI_ZOOKEEPER=zookeeper:2181

