# =============================================================================
# Dragonfly Cluster Configuration
# =============================================================================
# This file contains cluster-wide configuration settings for Dragonfly
# All cluster nodes will read this configuration file

# =============================================================================
# Cluster Topology
# =============================================================================
# Cluster consists of 3 hosts, each with 1 master + 1 replica
# Host 1: master (6379) + replica (6381)
# Host 2: master (6379) + replica (6381)
# Host 3: master (6379) + replica (6381)

# =============================================================================
# Cluster Nodes Configuration
# =============================================================================
# Master nodes (for cluster mode)
cluster.master.nodes=3
cluster.master.host1=dragonfly-host1-master:6379
cluster.master.host2=dragonfly-host2-master:6379
cluster.master.host3=dragonfly-host3-master:6379

# Replica nodes (for replication)
cluster.replica.host1=dragonfly-host1-replica:6381
cluster.replica.host2=dragonfly-host2-replica:6381
cluster.replica.host3=dragonfly-host3-replica:6381

# =============================================================================
# Cluster Network Configuration
# =============================================================================
# Cluster bus port (for inter-node communication)
cluster.bus.port=16379

# Cluster announce configuration
# Each host should announce its own IP address
cluster.announce.host1=${DRAGONFLY_HOST1_IP:-dragonfly-host1-master}
cluster.announce.host2=${DRAGONFLY_HOST2_IP:-dragonfly-host2-master}
cluster.announce.host3=${DRAGONFLY_HOST3_IP:-dragonfly-host3-master}

# =============================================================================
# Replication Configuration
# =============================================================================
# Replication mode: each replica replicates its local master
replication.mode=local
replication.sync=true

# =============================================================================
# Persistence Configuration
# =============================================================================
# RDB persistence
persistence.rdb.enabled=true
persistence.rdb.dir=/data
persistence.rdb.filename=dump.rdb
persistence.rdb.save.900.1=true
persistence.rdb.save.300.10=true
persistence.rdb.save.60.10000=true

# =============================================================================
# Performance Configuration
# =============================================================================
performance.proactor_threads=4
performance.maxmemory=2gb
performance.cache_mode=true
performance.dbnum=16

# =============================================================================
# Logging Configuration
# =============================================================================
logging.logtostderr=false
logging.alsologtostderr=false
logging.minloglevel=1

